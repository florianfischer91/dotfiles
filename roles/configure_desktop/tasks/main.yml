---
- name: Install packages
  become: true
  ansible.builtin.package:
    name:
      - gir1.2-gtop-2.0
      - gir1.2-clutter-1.0
      - gnome-tweaks
      - gnome-sushi # Gives you previews in the file manager when pressing space

- name: Install gnome extensions
  ansible.builtin.import_tasks: install_gnome_extensions.yml

- name: Set gnome hotkeys
  ansible.builtin.import_tasks: set_gnome_hotkeys.yml

- name: Set gnome settings
  ansible.builtin.import_tasks: set_gnome_settings.yml

- name: Hide desktop entries
  ansible.builtin.copy:
    dest: "{{ ansible_env.HOME }}/.local/share/applications/{{ item }}.desktop"
    content: |
      [Desktop Entry]
      Hidden=true
    mode: "0644"
  loop:
    - btop # Remove Btop entry for one that runs in alacritty
    - org.flameshot.Flameshot # App doesn't do anything when started from the app grid
    - display-im6.q16 # Remove the ImageMagick icon
    - org.gnome.SystemMonitor # Replacing this with btop
    - vim
    - htop

# TODO maybe add custom app-folder structure later
